(function(a){a.fn.autoComplete=function(b){var c=a(this).attr("name");a(this).addClass("autoComplete-active");a(this).attr("name",null);var d='<input type="hidden" class="autoComplete-hiddenField" name="'+c+'" />';var e=a.extend({url:null,minchars:4},b);a(this).wrap('<div class="autoComplete-holder">');var f=a(this).parent(".autoComplete-holder");a(f).prepend(d);a(this).keyup(function(b){var c=[8,13,16,17,18,19,20,27,32,33,34,35,37,38,39,40,36,45,46,112,113,114,115,116,117,118,119,120,121,122,123];if(a.inArray(b.keyCode,c)==-1){a(".list-holder",f).remove();var d=a(this).val();var g=this;if(d.length>=e.minchars){a.ajax({url:e.url,dataType:"json",data:"searchTerm="+d,success:function(b){a(".list-holder",f).remove();var c="";for(var d in b){var c=c+'<li id="'+b[d].id+'">'+b[d].label+"</li>"}if(a(g).css("position")=="absolute"){var e=a(g).position();var h=e.top;h=h+a(g).outerHeight();var i=e.left;a(f).append('<div class="list-holder" style="position:absolute;left:'+i+"px;top:"+h+"px;width:"+(a(g).outerWidth()-2)+'px;"><ul>'+c+"</ul></div>")}else{a(f).append('<div class="list-holder" style="position:absolute;width:'+(a(g).outerWidth()-2)+'px;"><ul>'+c+"</ul></div>")}a("ul li",f).click(function(){a(".autoComplete-hiddenField",f).val(a(this).attr("id"));a(g).val(a(this).text());a(".list-holder",f).slideUp(400,function(){a(".list-holder",f).remove()})})}})}}})}})(jQuery)